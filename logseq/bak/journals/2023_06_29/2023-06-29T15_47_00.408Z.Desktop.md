- 从源码编译Hadoop
	- 环境：WSL2 Ubuntu-20.04.6-LTS，Docker 24.0.2
	- 从官网下载源码后解压：`tar -zxvf <filename>`
	- 查看`BUILDING.txt`
	- 执行`./start-build-env.sh`
	- `Dockerfile`换源：（因为发现archive.ubuntu.com有时超时）
	  ``` Dockerfile
	  RUN sed -i s:/archive.ubuntu.com:/mirrors.tuna.tsinghua.edu.cn/ubuntu:g /etc/apt/sources.list
	  RUN cat /etc/apt/sources.list
	  RUN apt-get clean
	  RUN apt-get -y update --fix-missing
	  ```
	- Dockerfile curl 代理：（因为发现curl github.com 会error）
	  
	  ``` Dockerfile
	  # curl -x <protocol>://<ip_addr>:<proxy_inbound_port> <target_addr>
	  curl -x socks5://172.30.208.1:1081 https://github.com/spotbugs/spotbugs/releases/download/4.2.2/spotbugs-4.2.2.tgz
	  ```
		- 设置本机代理：“允许来自局域网的连接”
		- 查看本机代理设置：protocol对应的入站端口
		- `cat /etc/resolv.conf`获取wsl ip 地址
	- `./start-build-env.sh`自动进入容器，环境配置成功如图：
	  ![2023-06-29-17-08-22.png](../assets/2023-06-29-17-08-22_1688050507257_0.png){:height 152, :width 311}
	- maven编译（选项可参考`BUILDING.txt`）
	  
	  ``` bash
	  mvn clean package -DskipTests -Pdist,native -Dtar
	  
	  # 从指定模块开始编译：(module对应源码中文件夹名)
	  # mvn <goal> -rf :<module>
	  mvn clean package -DskipTests -Pdist,native -Dtar -rf :hadoop-mapreduce-client-hs-plugins
	  ```
	- query-table:: false
	  #+BEGIN_NOTE
	  - 使用vscode终端，可能受插件等的影响，编译慢，且由于未知原因多次卡死（需重启WSL），直接使用windows terminal顺畅很多
	  #+END_NOTE
	-
-
-